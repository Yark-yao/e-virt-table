<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>树形选择 - Cautious模式</title>
</head>
<body>
    <div style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 6px;">
        <h3 style="margin-top: 0; color: #495057;">Cautious模式说明：</h3>
        <p style="margin: 10px 0; line-height: 1.5;">只有但子项全选时父项选中，父项选中也会使子项全选，全选时父项点击则清空子项和父项取消勾选。</p>
    </div>
    <div id="e-virt-table"></div>
</body>
<script src="https://unpkg.com/e-virt-table/dist/index.umd.js"></script>
<script>
    let data = [
        {
            id: '1',
            name: '部门A',
            children: [
                {
                    id: '1-1',
                    name: '子部门A1',
                    children: [
                        { id: '1-1-1', name: '员工A1-1' },
                        { id: '1-1-2', name: '员工A1-2' }
                    ]
                },
                {
                    id: '1-2',
                    name: '子部门A2',
                    children: [
                        { id: '1-2-1', name: '员工A2-1' },
                        { id: '1-2-2', name: '员工A2-2' }
                    ]
                }
            ]
        },
        {
            id: '2',
            name: '部门B',
            children: [
                {
                    id: '2-1',
                    name: '子部门B1',
                    children: [
                        { id: '2-1-1', name: '员工B1-1' },
                        { id: '2-1-2', name: '员工B1-2' }
                    ]
                }
            ]
        }
    ];

    let columns = [
        {
            title: '选择',
            type: 'tree-selection',
            key: 'selection',
            width: 60,
            readonly: true
        },
        {
            title: 'ID',
            key: 'id',
            width: 100,
            readonly: true
        },
        {
            title: '名称',
            key: 'name',
            width: 200,
            readonly: true
        }
    ];

    const target = document.getElementById('e-virt-table');
    const table = new EVirtTable(target, {
        data,
        columns,
        config: {
            TREE_SELECT_MODE: 'cautious',
            ROW_KEY: 'id',
            ENABLE_SELECTOR: true,
            WIDTH: 800,
            HEIGHT: 400
        }
    });

    table.on('selectionChange', (selectedRows) => {
        console.log('选中的行:', selectedRows);
    });
</script>
</html> 